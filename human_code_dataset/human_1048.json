{
    "code": "def __init__(\n        self,\n        phoneme_path: str,\n        semantic_path: str,\n        max_sample: int = None,\n        max_sec: int = 100,\n        pad_val: int = 1024,\n        # min value of phoneme/sec\n        min_ps_ratio: int = 3,\n        # max value of phoneme/sec\n        max_ps_ratio: int = 25,\n    ) -> None:\n        super().__init__()\n\n        self.semantic_data = pd.read_csv(\n            semantic_path,\n            delimiter=\"\\t\",\n            encoding=\"utf-8\",\n        )\n        # get dict\n        self.path2 = phoneme_path  # \"%s/2-name2text.txt\"%exp_dir#phoneme_path\n        self.path3 = \"%s/3-bert\" % (\n            os.path.dirname(\n                phoneme_path,\n            )\n        )  # \"%s/3-bert\"%exp_dir#bert_dir\n        self.path6 = semantic_path  # \"%s/6-name2semantic.tsv\"%exp_dir#semantic_path\n        assert os.path.exists(self.path2)\n        assert os.path.exists(self.path6)\n        self.phoneme_data = {}\n        with open(self.path2, \"r\", encoding=\"utf8\") as f:\n            lines = f.read().strip(\"\\n\").split(\"\\n\")\n\n        for line in lines:\n            tmp = line.split(\"\\t\")\n            if len(tmp) != 4:\n                continue\n            self.phoneme_data[tmp[0]] = [tmp[1], tmp[2], tmp[3]]\n\n        # self.phoneme_data = np.load(phoneme_path, allow_pickle=True).item()\n        # pad for semantic tokens\n        self.PAD: int = pad_val\n        # self.hz = 25\n        # with open(\"/data/docker/liujing04/gpt-vits/mq-vits-s1bert_no_bert/configs/s2.json\", \"r\") as f:data = f.read()\n        # data=json.loads(data)[\"model\"][\"semantic_frame_rate\"]#50hz\n        # self.hz=int(data[:-2])#\n        self.hz = int(os.environ.get(\"hz\", \"25hz\")[:-2])\n\n        # max seconds of semantic token\n        self.max_sec = max_sec\n        self.min_ps_ratio = min_ps_ratio\n        self.max_ps_ratio = max_ps_ratio\n\n        if max_sample is not None:\n            self.semantic_data = self.semantic_data[:max_sample]\n\n        # {idx: (semantic, phoneme)}\n        # semantic list, phoneme list\n        self.semantic_phoneme = []\n        self.item_names = []\n\n        self.inited = False\n\n        if not self.inited:\n            # 调用初始化函数\n            self.init_batch()\n            self.inited = True\n            del self.semantic_data\n            del self.phoneme_data",
    "source": "github_repo:RVC-Boss/GPT-SoVITS",
    "file": "GPT_SoVITS/AR/data/dataset.py",
    "license": "MIT",
    "language": "python"
}