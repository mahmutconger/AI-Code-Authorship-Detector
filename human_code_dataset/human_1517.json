{
    "code": "class MyAddon:\n    @command.command(\"myaddon.histogram\")\n    def histogram(\n        self,\n        flows: Sequence[flow.Flow],\n        path: types.Path,\n    ) -> None:\n        totals: dict[str, int] = {}\n        for f in flows:\n            if isinstance(f, http.HTTPFlow):\n                totals[f.request.host] = totals.setdefault(f.request.host, 0) + 1\n\n        with open(path, \"w+\") as fp:\n            for cnt, dom in sorted((v, k) for (k, v) in totals.items()):\n                fp.write(f\"{cnt}: {dom}\\n\")\n\n        logging.log(ALERT, \"done\")",
    "source": "github_repo:mitmproxy/mitmproxy",
    "file": "examples/addons/commands-paths.py",
    "license": "MIT",
    "language": "python"
}