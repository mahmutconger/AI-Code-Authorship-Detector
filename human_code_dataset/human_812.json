{
    "code": "def test_recv_sock(self):\n    sock = \"carState\"\n    pub_sock = messaging.pub_sock(sock)\n    sub_sock = messaging.sub_sock(sock, timeout=100)\n    zmq_sleep()\n\n    # no wait and no msg in queue, socket should timeout\n    recvd = messaging.recv_sock(sub_sock)\n    assert recvd is None\n\n    # no wait and one msg in queue\n    msg = random_carstate()\n    pub_sock.send(msg.to_bytes())\n    time.sleep(0.01)\n    recvd = messaging.recv_sock(sub_sock)\n    assert isinstance(recvd, capnp._DynamicStructReader)\n    # https://github.com/python/mypy/issues/13038\n    assert_carstate(msg.carState, recvd.carState)",
    "source": "github_repo:commaai/openpilot",
    "file": "cereal/messaging/tests/test_messaging.py",
    "license": "MIT",
    "language": "python"
}