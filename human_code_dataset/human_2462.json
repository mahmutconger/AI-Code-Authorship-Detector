{
    "code": "def convert(\n    input_path: Path,\n    output_dir: Union[str, Path],\n    *,\n    file_type: str = \"json\",\n    n_sents: int = 1,\n    seg_sents: bool = False,\n    model: Optional[str] = None,\n    morphology: bool = False,\n    merge_subtokens: bool = False,\n    converter: str,\n    ner_map: Optional[Path] = None,\n    lang: Optional[str] = None,\n    concatenate: bool = False,\n    silent: bool = True,\n    msg: Optional[Printer] = None,\n) -> None:\n    input_path = Path(input_path)\n    if not msg:\n        msg = Printer(no_print=silent)\n    ner_map = srsly.read_json(ner_map) if ner_map is not None else None\n    doc_files = []\n    for input_loc in walk_directory(input_path, converter):\n        with input_loc.open(\"r\", encoding=\"utf-8\") as infile:\n            input_data = infile.read()\n        # Use converter function to convert data\n        func = CONVERTERS[converter]\n        docs = func(\n            input_data,\n            n_sents=n_sents,\n            seg_sents=seg_sents,\n            append_morphology=morphology,\n            merge_subtokens=merge_subtokens,\n            lang=lang,\n            model=model,\n            no_print=silent,\n            ner_map=ner_map,\n        )\n        doc_files.append((input_loc, docs))\n    if concatenate:\n        all_docs = itertools.chain.from_iterable([docs for _, docs in doc_files])\n        doc_files = [(input_path, all_docs)]\n    for input_loc, docs in doc_files:\n        if file_type == \"json\":\n            data = [docs_to_json(docs)]\n            len_docs = len(data)\n        else:\n            db = DocBin(docs=docs, store_user_data=True)\n            len_docs = len(db)\n            data = db.to_bytes()  # type: ignore[assignment]\n        if output_dir == \"-\":\n            _print_docs_to_stdout(data, file_type)\n        else:\n            if input_loc != input_path:\n                subpath = input_loc.relative_to(input_path)\n                output_file = Path(output_dir) / subpath.with_suffix(f\".{file_type}\")\n            else:\n                output_file = Path(output_dir) / input_loc.parts[-1]\n                output_file = output_file.with_suffix(f\".{file_type}\")\n            _write_docs_to_file(data, output_file, file_type)\n            msg.good(f\"Generated output file ({len_docs} documents): {output_file}\")",
    "source": "github_repo:explosion/spaCy",
    "file": "spacy/cli/convert.py",
    "license": "MIT",
    "language": "python"
}