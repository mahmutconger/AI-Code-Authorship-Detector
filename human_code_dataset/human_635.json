{
    "code": "def summarize_junit_xml(xml_path: Path) -> str:\n    tree = ET.parse(xml_path)\n    root = tree.getroot()\n    suite = root.find('testsuite')\n\n    pass_message: str = \":heavy_check_mark: &nbsp; Pass\"\n    fail_message: str = \":x: &nbsp; Fail\"\n\n    if suite is None:\n        raise ValueError(\"Invalid JUnit XML: No testsuite found\")\n\n    summary_lines: list[str] = []\n    summary_lines.append(\"#### Automatic validation of changes\\n\")\n    summary_lines.append(\"| Target | F+ Check | F- Check |\")\n    summary_lines.append(\"|---|---|---|\")\n\n    failures = int(suite.get('failures', 0))\n    errors_detected: bool = False\n\n    results: dict[str, dict[str, str]] = {}\n\n    for testcase in suite.findall('testcase'):\n        test_name = testcase.get('name').split('[')[0]\n        site_name = testcase.get('name').split('[')[1].rstrip(']')\n        failure = testcase.find('failure')\n        error = testcase.find('error')\n\n        if site_name not in results:\n            results[site_name] = {}\n\n        if test_name == \"test_false_neg\":\n            results[site_name]['F- Check'] = pass_message if failure is None and error is None else fail_message\n        elif test_name == \"test_false_pos\":\n            results[site_name]['F+ Check'] = pass_message if failure is None and error is None else fail_message\n\n        if error is not None:\n            errors_detected = True\n\n    for result in results:\n        summary_lines.append(f\"| {result} | {results[result].get('F+ Check', 'Error!')} | {results[result].get('F- Check', 'Error!')} |\")\n\n    if failures > 0:\n        summary_lines.append(\"\\n___\\n\" +\n            \"\\nFailures were detected on at least one updated target. Commits containing accuracy failures\" +\n            \" will often not be merged (unless a rationale is provided, such as false negatives due to regional differences).\")\n\n    if errors_detected:\n        summary_lines.append(\"\\n___\\n\" +\n            \"\\n**Errors were detected during validation. Please review the workflow logs.**\")\n\n    return \"\\n\".join(summary_lines)",
    "source": "github_repo:sherlock-project/sherlock",
    "file": "devel/summarize_site_validation.py",
    "license": "MIT",
    "language": "python"
}