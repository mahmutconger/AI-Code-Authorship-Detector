{
    "code": "def main(\n    rtsp_url: str,\n    zone_configuration_path: str,\n    model_id: str,\n    confidence: float,\n    iou: float,\n    classes: list[int],\n) -> None:\n    model = get_model(model_id=model_id)\n    tracker = sv.ByteTrack(minimum_matching_threshold=0.5)\n    frames_generator = get_stream_frames_generator(rtsp_url=rtsp_url)\n    fps_monitor = sv.FPSMonitor()\n\n    polygons = load_zones_config(file_path=zone_configuration_path)\n    zones = [\n        sv.PolygonZone(\n            polygon=polygon,\n            triggering_anchors=(sv.Position.CENTER,),\n        )\n        for polygon in polygons\n    ]\n    timers = [ClockBasedTimer() for _ in zones]\n\n    for frame in frames_generator:\n        fps_monitor.tick()\n        fps = fps_monitor.fps\n\n        results = model.infer(frame, confidence=confidence, iou_threshold=iou)[0]\n        detections = sv.Detections.from_inference(results)\n        detections = detections[find_in_list(detections.class_id, classes)]\n        detections = tracker.update_with_detections(detections)\n\n        annotated_frame = frame.copy()\n        annotated_frame = sv.draw_text(\n            scene=annotated_frame,\n            text=f\"{fps:.1f}\",\n            text_anchor=sv.Point(40, 30),\n            background_color=sv.Color.from_hex(\"#A351FB\"),\n            text_color=sv.Color.from_hex(\"#000000\"),\n        )\n\n        for idx, zone in enumerate(zones):\n            annotated_frame = sv.draw_polygon(\n                scene=annotated_frame, polygon=zone.polygon, color=COLORS.by_idx(idx)\n            )\n\n            detections_in_zone = detections[zone.trigger(detections)]\n            time_in_zone = timers[idx].tick(detections_in_zone)\n            custom_color_lookup = np.full(detections_in_zone.class_id.shape, idx)\n\n            annotated_frame = COLOR_ANNOTATOR.annotate(\n                scene=annotated_frame,\n                detections=detections_in_zone,\n                custom_color_lookup=custom_color_lookup,\n            )\n            labels = [\n                f\"#{tracker_id} {int(time // 60):02d}:{int(time % 60):02d}\"\n                for tracker_id, time in zip(detections_in_zone.tracker_id, time_in_zone)\n            ]\n            annotated_frame = LABEL_ANNOTATOR.annotate(\n                scene=annotated_frame,\n                detections=detections_in_zone,\n                labels=labels,\n                custom_color_lookup=custom_color_lookup,\n            )\n\n        cv2.imshow(\"Processed Video\", annotated_frame)\n        if cv2.waitKey(1) & 0xFF == ord(\"q\"):\n            break\n    cv2.destroyAllWindows()",
    "source": "github_repo:roboflow/supervision",
    "file": "examples/time_in_zone/inference_naive_stream_example.py",
    "license": "MIT",
    "language": "python"
}