{
    "code": "class ProcessManager:\n    \"\"\"Manages the lifecycle of the backend process.\"\"\"\n\n    def __init__(self):\n        self.webapp_process = None\n        self.shutdown_in_progress = False\n        if platform.system() == \"Windows\":\n            self._farewell_emoji = \":)\"  # ASCII smiley\n        else:\n            self._farewell_emoji = \"ðŸ‘‹\"  # Unicode wave\n\n    # params are required for signal handlers, even if they are not used\n    def handle_sigterm(self, _signum: int, _frame) -> None:\n        \"\"\"Handle SIGTERM signal gracefully.\"\"\"\n        if self.shutdown_in_progress:\n            return  # Already shutting down, ignore\n        self.shutdown_in_progress = True\n        self.shutdown()\n\n    # params are required for signal handlers, even if they are not used\n    def handle_sigint(self, _signum: int, _frame) -> None:\n        \"\"\"Handle SIGINT signal gracefully.\"\"\"\n        if self.shutdown_in_progress:\n            return  # Already shutting down, ignore\n        self.shutdown_in_progress = True\n        self.shutdown()\n\n    def shutdown(self):\n        \"\"\"Gracefully shutdown the webapp process.\"\"\"\n        if self.webapp_process and self.webapp_process.is_alive():\n            # Just terminate the process - the actual shutdown progress is handled\n            # by the FastAPI lifespan context in main.py\n            self.webapp_process.terminate()\n            # The long wait allows the process to finish setup, preventing it from\n            # getting in a state where background tasks continue to do work after termination\n            # is sent.\n            self.webapp_process.join(timeout=30)\n            if self.webapp_process.is_alive():\n                logger.warning(\"Process didn't terminate gracefully, killing it.\")\n                self.webapp_process.kill()\n                self.webapp_process.join()\n            self.print_farewell_message()\n\n        sys.exit(0)\n\n    def print_farewell_message(self) -> None:\n        \"\"\"Print a nice farewell message after shutdown is complete.\"\"\"\n        # Clear any progress indicator output that might be on the current line\n        sys.stdout.write(\"\\r\")  # Move cursor to beginning of line\n        sys.stdout.write(\" \" * 80)  # Clear the line with spaces\n        sys.stdout.write(\"\\r\")  # Move cursor back to beginning\n\n        click.echo()\n        farewell = click.style(f\"{self._farewell_emoji} See you next time!\", fg=\"bright_blue\", bold=True)\n        click.echo(farewell)",
    "source": "github_repo:langflow-ai/langflow",
    "file": "src/backend/base/langflow/__main__.py",
    "license": "MIT",
    "language": "python"
}