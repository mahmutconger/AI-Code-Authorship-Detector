{
    "code": "def _convert_openai_messages_to_bedrock_format(self, messages):\n        # Convert OpenAI message format to Bedrock message format\n        bedrock_messages = []\n        system_prompt = []\n        for message in messages:\n            if message.get(\"role\") == \"system\":\n                system_prompt = [{\"text\": message.get(\"content\")}]\n            elif message.get(\"role\") == \"user\":\n                bedrock_message = {\n                    \"role\": message.get(\"role\", \"user\"),\n                    \"content\": [{\"text\": message.get(\"content\")}],\n                }\n                bedrock_messages.append(bedrock_message)\n            elif message.get(\"role\") == \"assistant\":\n                bedrock_message = {\n                    \"role\": \"assistant\",\n                    \"content\": [{\"text\": message.get(\"content\")}],\n                }\n                openai_tool_calls = message.get(\"tool_calls\", [])\n                if openai_tool_calls:\n                    bedrock_tool_use = {\n                        \"toolUseId\": openai_tool_calls[0][\"id\"],\n                        \"name\": openai_tool_calls[0][\"function\"][\"name\"],\n                        \"input\": json.loads(\n                            openai_tool_calls[0][\"function\"][\"arguments\"]\n                        ),\n                    }\n                    bedrock_message[\"content\"].append({\"toolUse\": bedrock_tool_use})\n                    global CURRENT_TOOLUSE_ID\n                    CURRENT_TOOLUSE_ID = openai_tool_calls[0][\"id\"]\n                bedrock_messages.append(bedrock_message)\n            elif message.get(\"role\") == \"tool\":\n                bedrock_message = {\n                    \"role\": \"user\",\n                    \"content\": [\n                        {\n                            \"toolResult\": {\n                                \"toolUseId\": CURRENT_TOOLUSE_ID,\n                                \"content\": [{\"text\": message.get(\"content\")}],\n                            }\n                        }\n                    ],\n                }\n                bedrock_messages.append(bedrock_message)\n            else:\n                raise ValueError(f\"Invalid role: {message.get('role')}\")\n        return system_prompt, bedrock_messages",
    "source": "github_repo:FoundationAgents/OpenManus",
    "file": "app/bedrock.py",
    "license": "MIT",
    "language": "python"
}