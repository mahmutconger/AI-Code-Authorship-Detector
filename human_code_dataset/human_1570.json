{
    "code": "def config(event: Literal[\"push\", \"pull_request\"]) -> None:\n    import diff_shades  # type: ignore[import-not-found]\n\n    if event == \"push\":\n        jobs = [{\"mode\": \"preview-new-changes\", \"force-flag\": \"--force-preview-style\"}]\n        # Push on main, let's use PyPI Black as the baseline.\n        baseline_name = str(get_pypi_version())\n        baseline_cmd = f\"git checkout {baseline_name}\"\n        target_rev = os.getenv(\"GITHUB_SHA\")\n        assert target_rev is not None\n        target_name = \"main-\" + target_rev[:SHA_LENGTH]\n        target_cmd = f\"git checkout {target_rev}\"\n\n    elif event == \"pull_request\":\n        jobs = [\n            {\"mode\": \"preview-new-changes\", \"force-flag\": \"--force-preview-style\"},\n            {\"mode\": \"assert-no-changes\", \"force-flag\": \"--force-stable-style\"},\n        ]\n        # PR, let's use main as the baseline.\n        baseline_rev = get_main_revision()\n        baseline_name = \"main-\" + baseline_rev[:SHA_LENGTH]\n        baseline_cmd = f\"git checkout {baseline_rev}\"\n        pr_ref = os.getenv(\"GITHUB_REF\")\n        assert pr_ref is not None\n        pr_num = int(pr_ref[10:-6])\n        pr_rev = get_pr_revision(pr_num)\n        target_name = f\"pr-{pr_num}-{pr_rev[:SHA_LENGTH]}\"\n        target_cmd = f\"gh pr checkout {pr_num} && git merge origin/main\"\n\n    env = f\"{platform.system()}-{platform.python_version()}-{diff_shades.__version__}\"\n    for entry in jobs:\n        entry[\"baseline-analysis\"] = f\"{entry['mode']}-{baseline_name}.json\"\n        entry[\"baseline-setup-cmd\"] = baseline_cmd\n        entry[\"target-analysis\"] = f\"{entry['mode']}-{target_name}.json\"\n        entry[\"target-setup-cmd\"] = target_cmd\n        entry[\"baseline-cache-key\"] = f\"{env}-{baseline_name}-{entry['mode']}\"\n        if event == \"pull_request\":\n            # These are only needed for the PR comment.\n            entry[\"baseline-sha\"] = baseline_rev\n            entry[\"target-sha\"] = pr_rev\n\n    set_output(\"matrix\", json.dumps(jobs, indent=None))\n    pprint.pprint(jobs)",
    "source": "github_repo:psf/black",
    "file": "scripts/diff_shades_gha_helper.py",
    "license": "MIT",
    "language": "python"
}