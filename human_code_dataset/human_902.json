{
    "code": "def editor_file_selector(\n        self, input_path: Union[str, Path], init: bool = True\n    ) -> List[str]:\n        \"\"\"\n        Provides an interactive file selection interface using a .toml file.\n\n        Parameters\n        ----------\n        input_path : Union[str, Path]\n            The path where file selection is to be performed.\n        init : bool, optional\n            Indicates whether to initialize the .toml file with the file tree.\n\n        Returns\n        -------\n        List[str]\n            A list of strings representing the paths of selected files.\n        \"\"\"\n\n        root_path = Path(input_path)\n        tree_dict = {}\n        toml_file = DiskMemory(metadata_path(input_path)).path / \"file_selection.toml\"\n        # Define the toml file path\n\n        # Initialize .toml file with file tree if in initial state\n        if init:\n            tree_dict = {x: \"selected\" for x in self.get_current_files(root_path)}\n\n            s = toml.dumps({\"files\": tree_dict})\n\n            # add comments on all lines that match = \"selected\"\n            s = \"\\n\".join(\n                [\n                    \"# \" + line if line.endswith(' = \"selected\"') else line\n                    for line in s.split(\"\\n\")\n                ]\n            )\n            # Write to the toml file\n            with open(toml_file, \"w\") as f:\n                f.write(self.COMMENT)\n                f.write(self.LINTING_STRING)\n                f.write(s)\n\n        else:\n            # Load existing files from the .toml configuration\n            all_files = self.get_current_files(root_path)\n            s = toml.dumps({\"files\": {x: \"selected\" for x in all_files}})\n\n            # get linting status from the toml file\n            with open(toml_file, \"r\") as file:\n                linting_status = toml.load(file)\n            if (\n                \"linting\" in linting_status\n                and linting_status[\"linting\"].get(\"linting\", \"\").lower() == \"off\"\n            ):\n                self.is_linting = False\n                self.LINTING_STRING = '[linting]\\n\"linting\" = \"off\"\\n\\n'\n                print(\"\\nLinting is disabled\")\n\n            with open(toml_file, \"r\") as file:\n                selected_files = toml.load(file)\n\n            lines = s.split(\"\\n\")\n            s = \"\\n\".join(\n                lines[:1]\n                + [\n                    line\n                    if line.split(\" = \")[0].strip('\"') in selected_files[\"files\"]\n                    else \"# \" + line\n                    for line in lines[1:]\n                ]\n            )\n\n            # Write the merged list back to the .toml for user review and modification\n            with open(toml_file, \"w\") as file:\n                file.write(self.COMMENT)  # Ensure to write the comment\n                file.write(self.LINTING_STRING)\n                file.write(s)\n\n        print(\n            \"Please select and deselect (add # in front) files, save it, and close it to continue...\"\n        )\n        self.open_with_default_editor(\n            toml_file\n        )  # Open the .toml file in the default editor for user modification\n        return self.get_files_from_toml(\n            input_path, toml_file\n        )  # Return the list of selected files after user edits",
    "source": "github_repo:AntonOsika/gpt-engineer",
    "file": "gpt_engineer/applications/cli/file_selector.py",
    "license": "MIT",
    "language": "python"
}