{
    "code": "def _setup_compatibility_modules():\n    \"\"\"Set up comprehensive compatibility modules for langflow.base imports.\"\"\"\n    # First, set up the base attribute on this module (langflow)\n    current_module = sys.modules[__name__]\n\n    # Define all the modules we need to support\n    module_mappings = {\n        # Core base module\n        \"langflow.base\": \"lfx.base\",\n        # Inputs module - critical for class identity\n        \"langflow.inputs\": \"lfx.inputs\",\n        \"langflow.inputs.inputs\": \"lfx.inputs.inputs\",\n        # Schema modules - also critical for class identity\n        \"langflow.schema\": \"lfx.schema\",\n        \"langflow.schema.data\": \"lfx.schema.data\",\n        \"langflow.schema.serialize\": \"lfx.schema.serialize\",\n        # Template modules\n        \"langflow.template\": \"lfx.template\",\n        \"langflow.template.field\": \"lfx.template.field\",\n        \"langflow.template.field.base\": \"lfx.template.field.base\",\n        # Components modules\n        \"langflow.components\": \"lfx.components\",\n        \"langflow.components.helpers\": \"lfx.components.helpers\",\n        \"langflow.components.helpers.calculator_core\": \"lfx.components.helpers.calculator_core\",\n        \"langflow.components.helpers.create_list\": \"lfx.components.helpers.create_list\",\n        \"langflow.components.helpers.current_date\": \"lfx.components.helpers.current_date\",\n        \"langflow.components.helpers.id_generator\": \"lfx.components.helpers.id_generator\",\n        \"langflow.components.helpers.memory\": \"lfx.components.helpers.memory\",\n        \"langflow.components.helpers.output_parser\": \"lfx.components.helpers.output_parser\",\n        \"langflow.components.helpers.store_message\": \"lfx.components.helpers.store_message\",\n        # Individual modules that exist in lfx\n        \"langflow.base.agents\": \"lfx.base.agents\",\n        \"langflow.base.chains\": \"lfx.base.chains\",\n        \"langflow.base.data\": \"lfx.base.data\",\n        \"langflow.base.data.utils\": \"lfx.base.data.utils\",\n        \"langflow.base.document_transformers\": \"lfx.base.document_transformers\",\n        \"langflow.base.embeddings\": \"lfx.base.embeddings\",\n        \"langflow.base.flow_processing\": \"lfx.base.flow_processing\",\n        \"langflow.base.io\": \"lfx.base.io\",\n        \"langflow.base.io.chat\": \"lfx.base.io.chat\",\n        \"langflow.base.io.text\": \"lfx.base.io.text\",\n        \"langflow.base.langchain_utilities\": \"lfx.base.langchain_utilities\",\n        \"langflow.base.memory\": \"lfx.base.memory\",\n        \"langflow.base.models\": \"lfx.base.models\",\n        \"langflow.base.models.google_generative_ai_constants\": \"lfx.base.models.google_generative_ai_constants\",\n        \"langflow.base.models.openai_constants\": \"lfx.base.models.openai_constants\",\n        \"langflow.base.models.anthropic_constants\": \"lfx.base.models.anthropic_constants\",\n        \"langflow.base.models.aiml_constants\": \"lfx.base.models.aiml_constants\",\n        \"langflow.base.models.aws_constants\": \"lfx.base.models.aws_constants\",\n        \"langflow.base.models.groq_constants\": \"lfx.base.models.groq_constants\",\n        \"langflow.base.models.novita_constants\": \"lfx.base.models.novita_constants\",\n        \"langflow.base.models.ollama_constants\": \"lfx.base.models.ollama_constants\",\n        \"langflow.base.models.sambanova_constants\": \"lfx.base.models.sambanova_constants\",\n        \"langflow.base.models.cometapi_constants\": \"lfx.base.models.cometapi_constants\",\n        \"langflow.base.prompts\": \"lfx.base.prompts\",\n        \"langflow.base.prompts.api_utils\": \"lfx.base.prompts.api_utils\",\n        \"langflow.base.prompts.utils\": \"lfx.base.prompts.utils\",\n        \"langflow.base.textsplitters\": \"lfx.base.textsplitters\",\n        \"langflow.base.tools\": \"lfx.base.tools\",\n        \"langflow.base.vectorstores\": \"lfx.base.vectorstores\",\n    }\n\n    # Create compatibility modules for each mapping\n    for langflow_name, lfx_name in module_mappings.items():\n        if langflow_name not in sys.modules:\n            # Check if the lfx module exists\n            try:\n                spec = importlib.util.find_spec(lfx_name)\n                if spec is not None:\n                    # Create compatibility module\n                    compat_module = LangflowCompatibilityModule(langflow_name, lfx_name)\n                    sys.modules[langflow_name] = compat_module\n\n                    # Set up the module hierarchy\n                    parts = langflow_name.split(\".\")\n                    if len(parts) > 1:\n                        parent_name = \".\".join(parts[:-1])\n                        parent_module = sys.modules.get(parent_name)\n                        if parent_module is not None:\n                            setattr(parent_module, parts[-1], compat_module)\n\n                    # Special handling for top-level modules\n                    if langflow_name == \"langflow.base\":\n                        current_module.base = compat_module\n                    elif langflow_name == \"langflow.inputs\":\n                        current_module.inputs = compat_module\n                    elif langflow_name == \"langflow.schema\":\n                        current_module.schema = compat_module\n                    elif langflow_name == \"langflow.template\":\n                        current_module.template = compat_module\n                    elif langflow_name == \"langflow.components\":\n                        current_module.components = compat_module\n            except (ImportError, ValueError):\n                # Skip modules that don't exist in lfx\n                continue\n\n    # Handle modules that exist only in langflow (like knowledge_bases)\n    # These need special handling because they're not in lfx yet\n    langflow_only_modules = {\n        \"langflow.base.data.kb_utils\": \"langflow.base.data.kb_utils\",\n        \"langflow.base.knowledge_bases\": \"langflow.base.knowledge_bases\",\n        \"langflow.components.knowledge_bases\": \"langflow.components.knowledge_bases\",\n    }\n\n    for langflow_name in langflow_only_modules:\n        if langflow_name not in sys.modules:\n            try:\n                # Try to find the actual physical module file\n                from pathlib import Path\n\n                base_dir = Path(__file__).parent\n\n                if langflow_name == \"langflow.base.data.kb_utils\":\n                    kb_utils_file = base_dir / \"base\" / \"data\" / \"kb_utils.py\"\n                    if kb_utils_file.exists():\n                        spec = importlib.util.spec_from_file_location(langflow_name, kb_utils_file)\n                        if spec is not None and spec.loader is not None:\n                            module = importlib.util.module_from_spec(spec)\n                            sys.modules[langflow_name] = module\n                            spec.loader.exec_module(module)\n\n                            # Also add to parent module\n                            parent_module = sys.modules.get(\"langflow.base.data\")\n                            if parent_module is not None:\n                                parent_module.kb_utils = module\n\n                elif langflow_name == \"langflow.base.knowledge_bases\":\n                    kb_dir = base_dir / \"base\" / \"knowledge_bases\"\n                    kb_init_file = kb_dir / \"__init__.py\"\n                    if kb_init_file.exists():\n                        spec = importlib.util.spec_from_file_location(langflow_name, kb_init_file)\n                        if spec is not None and spec.loader is not None:\n                            module = importlib.util.module_from_spec(spec)\n                            sys.modules[langflow_name] = module\n                            spec.loader.exec_module(module)\n\n                            # Also add to parent module\n                            parent_module = sys.modules.get(\"langflow.base\")\n                            if parent_module is not None:\n                                parent_module.knowledge_bases = module\n\n                elif langflow_name == \"langflow.components.knowledge_bases\":\n                    components_kb_dir = base_dir / \"components\" / \"knowledge_bases\"\n                    components_kb_init_file = components_kb_dir / \"__init__.py\"\n                    if components_kb_init_file.exists():\n                        spec = importlib.util.spec_from_file_location(langflow_name, components_kb_init_file)\n                        if spec is not None and spec.loader is not None:\n                            module = importlib.util.module_from_spec(spec)\n                            sys.modules[langflow_name] = module\n                            spec.loader.exec_module(module)\n\n                            # Also add to parent module\n                            parent_module = sys.modules.get(\"langflow.components\")\n                            if parent_module is not None:\n                                parent_module.knowledge_bases = module\n            except (ImportError, AttributeError):\n                # If direct file loading fails, skip silently\n                continue",
    "source": "github_repo:langflow-ai/langflow",
    "file": "src/backend/base/langflow/__init__.py",
    "license": "MIT",
    "language": "python"
}