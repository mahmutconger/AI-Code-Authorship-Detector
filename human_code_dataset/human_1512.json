{
    "code": "#!/usr/bin/env python3\nimport asyncio\n\nfrom mitmproxy import options\nfrom mitmproxy import optmanager\nfrom mitmproxy.tools import console\nfrom mitmproxy.tools import dump\nfrom mitmproxy.tools import web\n\nmasters = {\n    \"mitmproxy\": console.master.ConsoleMaster,\n    \"mitmdump\": dump.DumpMaster,\n    \"mitmweb\": web.master.WebMaster,\n}\n\nunified_options = {}\n\n\nasync def dump():\n    for tool_name, master in masters.items():\n        opts = options.Options()\n        _ = master(opts)\n        for key, option in optmanager.dump_dicts(opts).items():\n            if key in unified_options:\n                unified_options[key][\"tools\"].append(tool_name)\n            else:\n                unified_options[key] = option\n                unified_options[key][\"tools\"] = [tool_name]\n\n\nasyncio.run(dump())\n\nprint(\n    \"\"\"\n      <table class=\\\"table optiontable\\\">\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>Type</th>\n            <th>Description</th>\n        </tr>\n        </thead>\n        <tbody>\n      \"\"\".strip()\n)\nfor key, option in sorted(unified_options.items(), key=lambda t: t[0]):\n    print(\n        f\"\"\"\n          <tr id=\"{key}\">\n          <th>\n            {key}<a class=\"anchor\" href=\"#{key}\"></a><br/>\n            {\" \".join([\"<span class='badge'>{}</span>\".format(t) for t in option[\"tools\"]])}</th>\n          <td>{option[\"type\"]}</td>\n          <td>{option[\"help\"]}<br/>\n            Default: {option[\"default\"]}\n            {\"<br/>Choices: {}\".format(\", \".join(option[\"choices\"])) if option[\"choices\"] else \"\"}\n\n          </td>\n          </tr>\n          \"\"\".strip()\n    )\nprint(\"</tbody></table>\")",
    "source": "github_repo:mitmproxy/mitmproxy",
    "file": "docs/scripts/options.py",
    "license": "MIT",
    "language": "python"
}