{
    "code": "def record_user_interface(d: CliDirector):\n    tmux = d.start_session(width=120, height=36)\n    window = tmux.attached_window\n\n    d.start_recording(\"recordings/mitmproxy_user_interface.cast\")\n    d.message(\n        \"Welcome to the mitmproxy tutorial. In this lesson we cover the user interface.\"\n    )\n    d.pause(1)\n    d.exec(\"mitmproxy\")\n    d.pause(3)\n\n    d.message(\"This is the default view of mitmproxy.\")\n    d.message(\"mitmproxy adds rows to the view as new requests come in.\")\n    d.message(\"Let’s generate some requests using `curl` in a separate terminal.\")\n\n    pane_top = d.current_pane\n    pane_bottom = window.split_window(attach=True)\n    pane_bottom.resize_pane(height=12)\n\n    d.focus_pane(pane_bottom)\n    d.pause(2)\n\n    d.type(\"curl\")\n    d.message(\"Use curl’s `--proxy` option to configure mitmproxy as a proxy.\")\n    d.type(\" --proxy http://127.0.0.1:8080\")\n\n    d.message(\"We use the text-based weather service `wttr.in`.\")\n    d.exec(' \"http://wttr.in/Dunedin?0\"')\n\n    d.pause(2)\n    d.press_key(\"Up\")\n    d.press_key(\"Left\", count=3)\n    d.press_key(\"BSpace\", count=7)\n    d.exec(\"Innsbruck\")\n\n    d.pause(2)\n    d.exec(\"exit\", target=pane_bottom)\n\n    d.focus_pane(pane_top)\n\n    d.message(\"You see the requests to `wttr.in` in the list of flows.\")\n\n    d.message(\"mitmproxy is controlled using keyboard shortcuts.\")\n    d.message(\"Use your arrow keys `↑` and `↓` to change the focused flow (`>>`).\")\n    d.press_key(\"Down\", pause=0.5)\n    d.press_key(\"Up\", pause=0.5)\n    d.press_key(\"Down\", pause=0.5)\n    d.press_key(\"Up\", pause=0.5)\n\n    d.message(\"The focused flow (`>>`) is used as a target for various commands.\")\n\n    d.message(\"One such command shows the flow details, it is bound to `ENTER`.\")\n\n    d.message(\"Press `ENTER` to view the details of the focused flow.\")\n    d.press_key(\"Enter\")\n\n    d.message(\"The flow details view has 3 panes: request, response, and detail.\")\n    d.message(\"Use your arrow keys `←` and `→` to switch between panes.\")\n    d.press_key(\"Right\", count=2, pause=2.5)\n    d.press_key(\"Left\", count=2, pause=1)\n\n    d.message(\n        \"Press `q` to exit the current view.\",\n    )\n    d.type(\"q\")\n\n    d.message(\"Press `?` to get a list of all available keyboard shortcuts.\")\n    d.type(\"?\")\n    d.pause(2)\n    d.press_key(\"Down\", count=20, pause=0.25)\n\n    d.message(\"Tip: Remember the `?` shortcut. It works in every view.\")\n    d.message(\"Press `q` to exit the current view.\")\n    d.type(\"q\")\n\n    d.message(\"Each shortcut is internally bound to a command.\")\n    d.message(\"You can also execute commands directly (without using shortcuts).\")\n    d.message(\"Press `:` to open the command prompt at the bottom.\")\n    d.type(\":\")\n\n    d.message(\"Enter `console.view.flow @focus`.\")\n    d.type(\"console.view.flow @focus\")\n\n    d.message(\"The command `console.view.flow` opens the details view for a flow.\")\n\n    d.message(\"The argument `@focus` defines the target flow.\")\n\n    d.message(\"Press `ENTER` to execute the command.\")\n    d.press_key(\"Enter\")\n\n    d.message(\n        \"Commands unleash the full power of mitmproxy, i.e., to configure interceptions.\"\n    )\n\n    d.message(\"You now know basics of mitmproxy’s UI and how to control it.\")\n    d.pause(1)\n\n    d.message(\"In the next lesson you will learn to intercept flows.\")\n    d.save_instructions(\"recordings/mitmproxy_user_interface_instructions.json\")\n    d.end()",
    "source": "github_repo:mitmproxy/mitmproxy",
    "file": "docs/scripts/clirecording/screenplays.py",
    "license": "MIT",
    "language": "python"
}