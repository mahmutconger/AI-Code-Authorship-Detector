{
    "code": "def parse_prediction(prediction: str) -> dict:\n    \"\"\"\n    Parses a prediction string into a dictionary of metric-value pairs.\n\n    This function takes a formatted string containing metrics and their corresponding\n    values, separated by the \"@\" symbol. Each metric may be enclosed in brackets and\n    may include commas. The function processes the input to extract and clean the\n    metrics and their values, returning them in a structured dictionary format.\n\n    Args:\n        prediction (str): A string representation of metrics and their values.\n\n    Returns:\n        dict: A dictionary where each key is a metric name and each value is the\n              corresponding value, either as a float or a string.\n    \"\"\"\n    pred_dict = {}\n    for pred in prediction.split(\"@\"):\n        if pred == \"\":\n            continue  # Skip any empty segments resulting from the split\n        temp = re.split(r\"[\\[\\]]\", pred.strip())  # Split the string by brackets\n        temp = [s.replace(\",\", \"\") for s in temp]  # Remove commas from the segments\n        parts = [s for s in temp if s]  # Filter out any empty strings\n        metric = parts[0].strip().replace(\",\", \"\")  # Extract and clean the metric name\n        value = parts[-1].replace(\",\", \"\").replace(\":\", \"\")  # Extract and clean the value\n\n        try:\n            value = float(value)  # Attempt to convert the value to a float\n        except ValueError:\n            pass  # If conversion fails, retain the value as a string\n\n        pred_dict[metric] = value  # Store the metric-value pair in the dictionary\n    return pred_dict",
    "source": "github_repo:FoundationAgents/MetaGPT",
    "file": "examples/di/InfiAgent-DABench/DABench.py",
    "license": "MIT",
    "language": "python"
}