{
    "code": "def record_replay_requests(d: CliDirector):\n    tmux = d.start_session(width=120, height=36)\n    window = tmux.attached_window\n\n    d.start_recording(\"recordings/mitmproxy_replay_requests.cast\")\n    d.message(\n        \"Welcome to the mitmproxy tutorial. In this lesson we cover replaying requests.\"\n    )\n    d.pause(1)\n    d.exec(\"mitmproxy\")\n    d.pause(3)\n\n    d.message(\n        \"Letâ€™s generate a request that we can replay. We use `curl` in a separate terminal.\"\n    )\n\n    pane_top = d.current_pane\n    pane_bottom = window.split_window(attach=True)\n    pane_bottom.resize_pane(height=12)\n\n    d.focus_pane(pane_bottom)\n    d.pause(2)\n\n    d.exec('curl --proxy http://127.0.0.1:8080 \"http://wttr.in/Dunedin?0\"')\n    d.pause(2)\n\n    d.focus_pane(pane_top)\n\n    d.message(\"We now want to replay the this request.\")\n    d.message(\n        \"Put the focus (`>>`) on the request that should be replayed. This is already the case in our example.\"\n    )\n    d.message(\"Press `r` to replay the request.\")\n    d.type(\"r\")\n\n    d.message(\n        \"Note that no new rows are added for replayed flows, but the existing row is updated.\"\n    )\n    d.message(\n        \"Every time you press `r`, mitmproxy sends this request to the server again and updates the flow.\"\n    )\n    d.press_key(\"r\", count=4, pause=1)\n\n    d.message(\"You can also modify a flow before replaying it.\")\n    d.message(\"It works as shown in the previous lesson, by pressing `e`.\")\n\n    d.message(\n        \"Congratulations! You have completed all lessons of the mitmproxy tutorial.\"\n    )\n    d.save_instructions(\"recordings/mitmproxy_replay_requests_instructions.json\")\n    d.end()",
    "source": "github_repo:mitmproxy/mitmproxy",
    "file": "docs/scripts/clirecording/screenplays.py",
    "license": "MIT",
    "language": "python"
}