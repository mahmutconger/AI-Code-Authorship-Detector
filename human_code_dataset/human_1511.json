{
    "code": "#!/usr/bin/env python3\nimport re\nfrom pathlib import Path\n\nhere = Path(__file__).absolute().parent\nexample_dir = here / \"..\" / \"src\" / \"examples\" / \"addons\"\nexamples = example_dir.glob(\"*.py\")\n\noverview = []\nlistings = []\n\nfor example in examples:\n    code = example.read_text()\n    slug = str(example.with_suffix(\"\").relative_to(example_dir))\n    slug = re.sub(r\"[^a-zA-Z]\", \"-\", slug)\n    match = re.search(\n        r'''\n        ^\n        (?:[#][^\\n]*\\n)?  # there might be a shebang\n        \"\"\"\n        \\s*\n        (.+?)\n        \\s*\n        (?:\\n\\n|\"\"\")     # stop on empty line or end of comment\n    ''',\n        code,\n        re.VERBOSE,\n    )\n    if match:\n        comment = \" — \" + match.group(1)\n    else:\n        comment = \"\"\n    overview.append(f\"  * [{example.name}](#{slug}){comment}\\n\")\n    listings.append(\n        f\"\"\"\n<h3 id=\"{slug}\">Example: {example.name}</h3>\n\n```python\n{code.strip()}\n```\n\"\"\"\n    )\n\nprint(\n    f\"\"\"\n# Addon Examples\n\n### Dedicated Example Addons\n\n{\"\".join(overview)}\n\n### Built-In Addons\n\nMuch of mitmproxy’s own functionality is defined in\n[a suite of built-in addons](https://github.com/mitmproxy/mitmproxy/tree/main/mitmproxy/addons),\nimplementing everything from functionality like anticaching and sticky cookies to our onboarding webapp.\nThe built-in addons make for instructive reading, and you will quickly see that quite complex functionality\ncan often boil down to a very small, completely self-contained modules.\n\n\n### Additional Community Examples\n\nAdditional examples contributed by the mitmproxy community can be found\n[on GitHub](https://github.com/mitmproxy/mitmproxy/tree/main/examples/contrib).\n\n-------------------------\n\n{\"\".join(listings)}\n\"\"\"\n)",
    "source": "github_repo:mitmproxy/mitmproxy",
    "file": "docs/scripts/examples.py",
    "license": "MIT",
    "language": "python"
}