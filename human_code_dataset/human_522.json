{
    "code": "class UpdateAgentTaskEvent(BaseEvent):\n\t# Required fields for identification\n\tid: str  # The task ID to update\n\tuser_id: str = Field(max_length=255)  # For authorization\n\tdevice_id: str | None = Field(None, max_length=255)  # Device ID for auth lookup\n\n\t# Optional fields that can be updated\n\tstopped: bool | None = None\n\tpaused: bool | None = None\n\tdone_output: str | None = Field(None, max_length=MAX_STRING_LENGTH)\n\tfinished_at: datetime | None = None\n\tagent_state: dict | None = None\n\tuser_feedback_type: str | None = Field(None, max_length=10)  # UserFeedbackType enum value as string\n\tuser_comment: str | None = Field(None, max_length=MAX_COMMENT_LENGTH)\n\tgif_url: str | None = Field(None, max_length=MAX_URL_LENGTH)\n\n\t@classmethod\n\tdef from_agent(cls, agent) -> 'UpdateAgentTaskEvent':\n\t\t\"\"\"Create an UpdateAgentTaskEvent from an Agent instance\"\"\"\n\t\tif not hasattr(agent, '_task_start_time'):\n\t\t\traise ValueError('Agent must have _task_start_time attribute')\n\n\t\tdone_output = agent.history.final_result() if agent.history else None\n\t\treturn cls(\n\t\t\tid=str(agent.task_id),\n\t\t\tuser_id='',  # To be filled by cloud handler\n\t\t\tdevice_id=agent.cloud_sync.auth_client.device_id\n\t\t\tif hasattr(agent, 'cloud_sync') and agent.cloud_sync and agent.cloud_sync.auth_client\n\t\t\telse None,\n\t\t\tstopped=agent.state.stopped if hasattr(agent.state, 'stopped') else False,\n\t\t\tpaused=agent.state.paused if hasattr(agent.state, 'paused') else False,\n\t\t\tdone_output=done_output,\n\t\t\tfinished_at=datetime.now(timezone.utc) if agent.history and agent.history.is_done() else None,\n\t\t\tagent_state=agent.state.model_dump() if hasattr(agent.state, 'model_dump') else {},\n\t\t\tuser_feedback_type=None,\n\t\t\tuser_comment=None,\n\t\t\tgif_url=None,\n\t\t\t# user_feedback_type and user_comment would be set by the API/frontend\n\t\t\t# gif_url would be set after GIF generation if needed\n\t\t)",
    "source": "github_repo:browser-use/browser-use",
    "file": "browser_use/agent/cloud_events.py",
    "license": "MIT",
    "language": "python"
}