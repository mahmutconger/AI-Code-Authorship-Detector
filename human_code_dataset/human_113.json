{
    "code": "def create_lfx_tag():\n    # Since LFX has never been released, we'll use the version from pyproject.toml as base\n    from pathlib import Path\n\n    import tomllib\n\n    # Read version from pyproject.toml\n    lfx_pyproject_path = Path(__file__).parent.parent.parent / \"src\" / \"lfx\" / \"pyproject.toml\"\n    pyproject_data = tomllib.loads(lfx_pyproject_path.read_text())\n\n    current_version_str = pyproject_data[\"project\"][\"version\"]\n    current_version = Version(current_version_str)\n\n    try:\n        current_nightly_version = get_latest_published_version(is_nightly=True)\n        nightly_base_version = current_nightly_version.base_version\n    except (requests.RequestException, KeyError, ValueError):\n        # If LFX nightly doesn't exist on PyPI yet, this is the first nightly\n        current_nightly_version = None\n        nightly_base_version = None\n\n    build_number = \"0\"\n    latest_base_version = current_version.base_version\n\n    if current_nightly_version and latest_base_version == nightly_base_version:\n        # If the latest version is the same as the nightly version, increment the build number\n        build_number = str(current_nightly_version.dev + 1)\n\n    new_nightly_version = latest_base_version + \".dev\" + build_number\n\n    # Prepend \"v\" to the version, if DNE.\n    # This is an update to the nightly version format.\n    if not new_nightly_version.startswith(\"v\"):\n        new_nightly_version = \"v\" + new_nightly_version\n\n    # Verify if version is PEP440 compliant.\n    packaging.version.Version(new_nightly_version)\n\n    return new_nightly_version",
    "source": "github_repo:langflow-ai/langflow",
    "file": "scripts/ci/lfx_nightly_tag.py",
    "license": "MIT",
    "language": "python"
}