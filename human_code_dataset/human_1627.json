{
    "code": "def __init__(\n        self,\n        serverparams: StdioServerParameters | dict[str, Any],\n        *tool_names: str,\n        connect_timeout: int = 30,\n    ) -> None:\n        \"\"\"Initialize the MCP Server.\n\n        Args:\n            serverparams: The parameters for the MCP server it supports either a\n                `StdioServerParameters` or a `dict` respectively for STDIO and SSE.\n            *tool_names: Optional names of tools to filter. If provided, only tools with\n                matching names will be available.\n            connect_timeout: Connection timeout in seconds to the MCP server (default is 30s).\n\n        \"\"\"\n        super().__init__()\n        self._adapter = None\n        self._tools = None\n        self._tool_names = list(tool_names) if tool_names else None\n\n        if not MCP_AVAILABLE:\n            import click\n\n            if click.confirm(\n                \"You are missing the 'mcp' package. Would you like to install it?\"\n            ):\n                import subprocess\n\n                try:\n                    subprocess.run([\"uv\", \"add\", \"mcp crewai-tools[mcp]\"], check=True)  # noqa: S607\n\n                except subprocess.CalledProcessError as e:\n                    raise ImportError(\"Failed to install mcp package\") from e\n            else:\n                raise ImportError(\n                    \"`mcp` package not found, please run `uv add crewai-tools[mcp]`\"\n                )\n\n        try:\n            self._serverparams = serverparams\n            self._adapter = MCPAdapt(\n                self._serverparams, CrewAIAdapter(), connect_timeout\n            )\n            self.start()\n\n        except Exception as e:\n            if self._adapter is not None:\n                try:\n                    self.stop()\n                except Exception as stop_e:\n                    logger.error(f\"Error during stop cleanup: {stop_e}\")\n            raise RuntimeError(f\"Failed to initialize MCP Adapter: {e}\") from e",
    "source": "github_repo:crewAIInc/crewAI",
    "file": "lib/crewai-tools/src/crewai_tools/adapters/mcp_adapter.py",
    "license": "MIT",
    "language": "python"
}