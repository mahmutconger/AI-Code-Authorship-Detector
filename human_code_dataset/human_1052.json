{
    "code": "def collate(self, examples: List[Dict]) -> Dict:\n        sample_index: List[int] = []\n        phoneme_ids: List[torch.Tensor] = []\n        phoneme_ids_lens: List[int] = []\n        semantic_ids: List[torch.Tensor] = []\n        semantic_ids_lens: List[int] = []\n        # return\n\n        for item in examples:\n            sample_index.append(item[\"idx\"])\n            phoneme_ids.append(np.array(item[\"phoneme_ids\"], dtype=np.int64))\n            semantic_ids.append(np.array(item[\"semantic_ids\"], dtype=np.int64))\n            phoneme_ids_lens.append(item[\"phoneme_ids_len\"])\n            semantic_ids_lens.append(item[\"semantic_ids_len\"])\n\n        # pad 0\n        phoneme_ids = batch_sequences(phoneme_ids)\n        semantic_ids = batch_sequences(semantic_ids, pad_value=self.PAD)\n\n        # # convert each batch to torch.tensor\n        phoneme_ids = torch.tensor(phoneme_ids)\n        semantic_ids = torch.tensor(semantic_ids)\n        phoneme_ids_lens = torch.tensor(phoneme_ids_lens)\n        semantic_ids_lens = torch.tensor(semantic_ids_lens)\n        bert_padded = torch.FloatTensor(len(examples), 1024, max(phoneme_ids_lens))\n        bert_padded.zero_()\n\n        for idx, item in enumerate(examples):\n            bert = item[\"bert_feature\"]\n            if bert != None:\n                bert_padded[idx, :, : bert.shape[-1]] = bert\n\n        return {\n            # List[int]\n            \"ids\": sample_index,\n            # torch.Tensor (B, max_phoneme_length)\n            \"phoneme_ids\": phoneme_ids,\n            # torch.Tensor (B)\n            \"phoneme_ids_len\": phoneme_ids_lens,\n            # torch.Tensor (B, max_semantic_ids_length)\n            \"semantic_ids\": semantic_ids,\n            # torch.Tensor (B)\n            \"semantic_ids_len\": semantic_ids_lens,\n            # torch.Tensor (B, 1024, max_phoneme_length)\n            \"bert_feature\": bert_padded,\n        }",
    "source": "github_repo:RVC-Boss/GPT-SoVITS",
    "file": "GPT_SoVITS/AR/data/dataset.py",
    "license": "MIT",
    "language": "python"
}