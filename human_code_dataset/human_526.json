{
    "code": "class CreateAgentSessionEvent(BaseEvent):\n\t# Model fields\n\tid: str = Field(default_factory=uuid7str)\n\tuser_id: str = Field(max_length=255)\n\tdevice_id: str | None = Field(None, max_length=255)  # Device ID for auth lookup\n\tbrowser_session_id: str = Field(max_length=255)\n\tbrowser_session_live_url: str = Field(max_length=MAX_URL_LENGTH)\n\tbrowser_session_cdp_url: str = Field(max_length=MAX_URL_LENGTH)\n\tbrowser_session_stopped: bool = False\n\tbrowser_session_stopped_at: datetime | None = None\n\tis_source_api: bool | None = None\n\tbrowser_state: dict = Field(default_factory=dict)\n\tbrowser_session_data: dict | None = None\n\n\t@classmethod\n\tdef from_agent(cls, agent) -> 'CreateAgentSessionEvent':\n\t\t\"\"\"Create a CreateAgentSessionEvent from an Agent instance\"\"\"\n\t\treturn cls(\n\t\t\tid=str(agent.session_id),\n\t\t\tuser_id='',  # To be filled by cloud handler\n\t\t\tdevice_id=agent.cloud_sync.auth_client.device_id\n\t\t\tif hasattr(agent, 'cloud_sync') and agent.cloud_sync and agent.cloud_sync.auth_client\n\t\t\telse None,\n\t\t\tbrowser_session_id=agent.browser_session.id,\n\t\t\tbrowser_session_live_url='',  # To be filled by cloud handler\n\t\t\tbrowser_session_cdp_url='',  # To be filled by cloud handler\n\t\t\tbrowser_state={\n\t\t\t\t'viewport': agent.browser_profile.viewport if agent.browser_profile else {'width': 1280, 'height': 720},\n\t\t\t\t'user_agent': agent.browser_profile.user_agent if agent.browser_profile else None,\n\t\t\t\t'headless': agent.browser_profile.headless if agent.browser_profile else True,\n\t\t\t\t'initial_url': None,  # Will be updated during execution\n\t\t\t\t'final_url': None,  # Will be updated during execution\n\t\t\t\t'total_pages_visited': 0,  # Will be updated during execution\n\t\t\t\t'session_duration_seconds': 0,  # Will be updated during execution\n\t\t\t},\n\t\t\tbrowser_session_data={\n\t\t\t\t'cookies': [],\n\t\t\t\t'secrets': {},\n\t\t\t\t# TODO: send secrets safely so tasks can be replayed on cloud seamlessly\n\t\t\t\t# 'secrets': dict(agent.sensitive_data) if agent.sensitive_data else {},\n\t\t\t\t'allowed_domains': agent.browser_profile.allowed_domains if agent.browser_profile else [],\n\t\t\t},\n\t\t)",
    "source": "github_repo:browser-use/browser-use",
    "file": "browser_use/agent/cloud_events.py",
    "license": "MIT",
    "language": "python"
}