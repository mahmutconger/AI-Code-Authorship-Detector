{
    "code": "def _process_schema_type(\n        self, schema: dict[str, Any], type_name: str\n    ) -> type[Any] | _SpecialForm:\n        \"\"\"Process a JSON schema and return appropriate Python type.\"\"\"\n        if \"anyOf\" in schema:\n            any_of_types = schema[\"anyOf\"]\n            is_nullable = any(t.get(\"type\") == \"null\" for t in any_of_types)\n            non_null_types = [t for t in any_of_types if t.get(\"type\") != \"null\"]\n\n            if non_null_types:\n                base_type = self._process_schema_type(non_null_types[0], type_name)\n                return Optional[base_type] if is_nullable else base_type  # noqa: UP045\n            return cast(type[Any], Optional[str])  # noqa: UP045\n\n        if \"oneOf\" in schema:\n            return self._process_schema_type(schema[\"oneOf\"][0], type_name)\n\n        if \"allOf\" in schema:\n            return self._process_schema_type(schema[\"allOf\"][0], type_name)\n\n        json_type = schema.get(\"type\", \"string\")\n\n        if \"enum\" in schema:\n            enum_values = schema[\"enum\"]\n            if not enum_values:\n                return self._map_json_type_to_python(json_type)\n            return Literal[tuple(enum_values)]  # type: ignore[return-value]\n\n        if json_type == \"array\":\n            items_schema = schema.get(\"items\", {\"type\": \"string\"})\n            item_type = self._process_schema_type(items_schema, f\"{type_name}Item\")\n            return list[item_type]  # type: ignore[valid-type]\n\n        if json_type == \"object\":\n            return self._create_nested_model(schema, type_name)\n\n        return self._map_json_type_to_python(json_type)",
    "source": "github_repo:crewAIInc/crewAI",
    "file": "lib/crewai-tools/src/crewai_tools/adapters/enterprise_adapter.py",
    "license": "MIT",
    "language": "python"
}