{
    "code": "import face_recognition\nimport cv2\n\n# This is a demo of running face recognition on a video file and saving the results to a new video file.\n#\n# PLEASE NOTE: This example requires OpenCV (the `cv2` library) to be installed only to read from your webcam.\n# OpenCV is *not* required to use the face_recognition library. It's only required if you want to run this\n# specific demo. If you have trouble installing it, try any of the other demos that don't require it instead.\n\n# Open the input movie file\ninput_movie = cv2.VideoCapture(\"hamilton_clip.mp4\")\nlength = int(input_movie.get(cv2.CAP_PROP_FRAME_COUNT))\n\n# Create an output movie file (make sure resolution/frame rate matches input video!)\nfourcc = cv2.VideoWriter_fourcc(*'XVID')\noutput_movie = cv2.VideoWriter('output.avi', fourcc, 29.97, (640, 360))\n\n# Load some sample pictures and learn how to recognize them.\nlmm_image = face_recognition.load_image_file(\"lin-manuel-miranda.png\")\nlmm_face_encoding = face_recognition.face_encodings(lmm_image)[0]\n\nal_image = face_recognition.load_image_file(\"alex-lacamoire.png\")\nal_face_encoding = face_recognition.face_encodings(al_image)[0]\n\nknown_faces = [\n    lmm_face_encoding,\n    al_face_encoding\n]\n\n# Initialize some variables\nface_locations = []\nface_encodings = []\nface_names = []\nframe_number = 0\n\nwhile True:\n    # Grab a single frame of video\n    ret, frame = input_movie.read()\n    frame_number += 1\n\n    # Quit when the input video file ends\n    if not ret:\n        break\n\n    # Convert the image from BGR color (which OpenCV uses) to RGB color (which face_recognition uses)\n    rgb_frame = frame[:, :, ::-1]\n\n    # Find all the faces and face encodings in the current frame of video\n    face_locations = face_recognition.face_locations(rgb_frame)\n    face_encodings = face_recognition.face_encodings(rgb_frame, face_locations)\n\n    face_names = []\n    for face_encoding in face_encodings:\n        # See if the face is a match for the known face(s)\n        match = face_recognition.compare_faces(known_faces, face_encoding, tolerance=0.50)\n\n        # If you had more than 2 faces, you could make this logic a lot prettier\n        # but I kept it simple for the demo\n        name = None\n        if match[0]:\n            name = \"Lin-Manuel Miranda\"\n        elif match[1]:\n            name = \"Alex Lacamoire\"\n\n        face_names.append(name)\n\n    # Label the results\n    for (top, right, bottom, left), name in zip(face_locations, face_names):\n        if not name:\n            continue\n\n        # Draw a box around the face\n        cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)\n\n        # Draw a label with a name below the face\n        cv2.rectangle(frame, (left, bottom - 25), (right, bottom), (0, 0, 255), cv2.FILLED)\n        font = cv2.FONT_HERSHEY_DUPLEX\n        cv2.putText(frame, name, (left + 6, bottom - 6), font, 0.5, (255, 255, 255), 1)\n\n    # Write the resulting image to the output video file\n    print(\"Writing frame {} / {}\".format(frame_number, length))\n    output_movie.write(frame)\n\n# All done!\ninput_movie.release()\ncv2.destroyAllWindows()",
    "source": "github_repo:ageitgey/face_recognition",
    "file": "examples/facerec_from_video_file.py",
    "license": "MIT",
    "language": "python"
}