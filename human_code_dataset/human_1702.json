{
    "code": "class PubSubConnector(QObject):\n    def __init__(self, *args):\n        super().__init__(*args)\n        self._funcDict = {}  # 缓存历史已订阅的函数\n\n    # 订阅事件。传入 标题，函数所在Item，函数名\n    @Slot(str, \"QVariant\", str)\n    def subscribe(self, title, item, funcName):\n        func = getattr(item, funcName, None)\n        if not func:\n            logger.error(f\"qml订阅事件失败！未在 {item} 中找到函数 {funcName} 。\")\n            return\n        PubSubService.subscribe(title, func)\n        fKey = title + funcName\n        self._funcDict[fKey] = func\n\n    # 订阅事件，可额外传入组\n    @Slot(str, \"QVariant\", str, str)\n    def subscribeGroup(self, title, item, funcName, groupName):\n        func = getattr(item, funcName, None)\n        if not func:\n            logger.error(f\"qml订阅事件失败！未在 {item} 中找到函数 {funcName} 。\")\n            return\n        PubSubService.subscribeGroup(title, func, groupName)\n        fKey = title + funcName\n        self._funcDict[fKey] = func\n\n    # 取消订阅事件，由于getattr的不稳定性，因此从历史记录中取函数引用，而不是重新查询。\n    @Slot(str, \"QVariant\", str)\n    def unsubscribe(self, title, item, funcName):\n        fKey = title + funcName\n        if fKey not in self._funcDict:\n            logger.error(f\"qml订阅事件失败！fKey {fKey} 未在 _funcDict 中。\")\n            return\n        func = self._funcDict[fKey]\n        del self._funcDict[fKey]\n        PubSubService.unsubscribe(title, func)\n\n    # 取消订阅整个组的事件\n    @Slot(str)\n    def unsubscribeGroup(self, groupName):\n        PubSubService.unsubscribeGroup(groupName)\n\n    # 发布事件，在qml扩展此函数。传入 args 为参数列表。\n    @Slot(str, list)\n    def publish_(self, title, args):\n        PubSubService.publish(title, *args)",
    "source": "github_repo:hiroi-sora/Umi-OCR",
    "file": "UmiOCR-data/py_src/event_bus/pubsub_connector.py",
    "license": "MIT",
    "language": "python"
}