{
    "code": "import os\nimport sys\nimport json\nfrom datetime import datetime\n\nfrom slack_sdk.web.client import WebClient\n\nCHANNEL = \"#alerts-universe\"\nSLACK_TOKEN = os.environ.get(\"SLACK_BOT_TOKEN\", \"ENV VAR not available!\")\nDATETIME_FORMAT = \"%Y-%m-%dT%H:%M:%SZ\"\n\nclient = WebClient(SLACK_TOKEN)\ngithub_context = json.loads(sys.argv[1])\n\nevent = github_context['event']\npr_title = event['pull_request'][\"title\"]\npr_link = event['pull_request'][\"patch_url\"].replace(\".patch\", \"\")\npr_author_url = event['sender'][\"html_url\"]\npr_author_name = pr_author_url.rsplit('/')[-1]\npr_created_at_dt = datetime.strptime(\n    event['pull_request'][\"created_at\"],\n    DATETIME_FORMAT\n)\npr_created_at = pr_created_at_dt.strftime(\"%c\")\npr_updated_at_dt = datetime.strptime(\n    event['pull_request'][\"updated_at\"],\n    DATETIME_FORMAT\n)\npr_updated_at = pr_updated_at_dt.strftime(\"%c\")\n\nblocks = [\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"ðŸ“£ New spaCy Universe Project Alert âœ¨\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"fields\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": f\"*Pull Request:*\\n<{pr_link}|{pr_title}>\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": f\"*Author:*\\n<{pr_author_url}|{pr_author_name}>\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": f\"*Created at:*\\n {pr_created_at}\"\n        },\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": f\"*Last Updated:*\\n {pr_updated_at}\"\n        }\n      ]\n    }\n  ]\n\n\nclient.chat_postMessage(\n    channel=CHANNEL,\n    text=\"spaCy universe project PR alert\",\n    blocks=blocks\n)",
    "source": "github_repo:explosion/spaCy",
    "file": ".github/spacy_universe_alert.py",
    "license": "MIT",
    "language": "python"
}