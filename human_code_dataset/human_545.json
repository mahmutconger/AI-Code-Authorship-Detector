{
    "code": "def __init__(\n\t\tself,\n\t\ttask: str,\n\t\tsystem_message: SystemMessage,\n\t\tfile_system: FileSystem,\n\t\tstate: MessageManagerState = MessageManagerState(),\n\t\tuse_thinking: bool = True,\n\t\tinclude_attributes: list[str] | None = None,\n\t\tsensitive_data: dict[str, str | dict[str, str]] | None = None,\n\t\tmax_history_items: int | None = None,\n\t\tvision_detail_level: Literal['auto', 'low', 'high'] = 'auto',\n\t\tinclude_tool_call_examples: bool = False,\n\t\tinclude_recent_events: bool = False,\n\t\tsample_images: list[ContentPartTextParam | ContentPartImageParam] | None = None,\n\t\tllm_screenshot_size: tuple[int, int] | None = None,\n\t):\n\t\tself.task = task\n\t\tself.state = state\n\t\tself.system_prompt = system_message\n\t\tself.file_system = file_system\n\t\tself.sensitive_data_description = ''\n\t\tself.use_thinking = use_thinking\n\t\tself.max_history_items = max_history_items\n\t\tself.vision_detail_level = vision_detail_level\n\t\tself.include_tool_call_examples = include_tool_call_examples\n\t\tself.include_recent_events = include_recent_events\n\t\tself.sample_images = sample_images\n\t\tself.llm_screenshot_size = llm_screenshot_size\n\n\t\tassert max_history_items is None or max_history_items > 5, 'max_history_items must be None or greater than 5'\n\n\t\t# Store settings as direct attributes instead of in a settings object\n\t\tself.include_attributes = include_attributes or []\n\t\tself.sensitive_data = sensitive_data\n\t\tself.last_input_messages = []\n\t\tself.last_state_message_text: str | None = None\n\t\t# Only initialize messages if state is empty\n\t\tif len(self.state.history.get_messages()) == 0:\n\t\t\tself._set_message_with_type(self.system_prompt, 'system')",
    "source": "github_repo:browser-use/browser-use",
    "file": "browser_use/agent/message_manager/service.py",
    "license": "MIT",
    "language": "python"
}