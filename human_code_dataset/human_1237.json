{
    "code": "def get_task(\n    request: Request,\n    task_id: str = Path(..., description=\"Task ID\"),\n    query: TaskQueryRequest = Depends(),\n):\n    endpoint = config.app.get(\"endpoint\", \"\")\n    if not endpoint:\n        endpoint = str(request.base_url)\n    endpoint = endpoint.rstrip(\"/\")\n\n    request_id = base.get_task_id(request)\n    task = sm.state.get_task(task_id)\n    if task:\n        task_dir = utils.task_dir()\n\n        def file_to_uri(file):\n            if not file.startswith(endpoint):\n                _uri_path = v.replace(task_dir, \"tasks\").replace(\"\\\\\", \"/\")\n                _uri_path = f\"{endpoint}/{_uri_path}\"\n            else:\n                _uri_path = file\n            return _uri_path\n\n        if \"videos\" in task:\n            videos = task[\"videos\"]\n            urls = []\n            for v in videos:\n                urls.append(file_to_uri(v))\n            task[\"videos\"] = urls\n        if \"combined_videos\" in task:\n            combined_videos = task[\"combined_videos\"]\n            urls = []\n            for v in combined_videos:\n                urls.append(file_to_uri(v))\n            task[\"combined_videos\"] = urls\n        return utils.get_response(200, task)\n\n    raise HttpException(\n        task_id=task_id, status_code=404, message=f\"{request_id}: task not found\"\n    )",
    "source": "github_repo:harry0703/MoneyPrinterTurbo",
    "file": "app/controllers/v1/video.py",
    "license": "MIT",
    "language": "python"
}