{
    "code": "def load_prompt(\n    input_repo: DiskMemory,\n    improve_mode: bool,\n    prompt_file: str,\n    image_directory: str,\n    entrypoint_prompt_file: str = \"\",\n) -> Prompt:\n    \"\"\"\n    Load or request a prompt from the user based on the mode.\n\n    Parameters\n    ----------\n    input_repo : DiskMemory\n        The disk memory object where prompts and other data are stored.\n    improve_mode : bool\n        Flag indicating whether the application is in improve mode.\n\n    Returns\n    -------\n    str\n        The loaded or inputted prompt.\n    \"\"\"\n\n    if os.path.isdir(prompt_file):\n        raise ValueError(\n            f\"The path to the prompt, {prompt_file}, already exists as a directory. No prompt can be read from it. Please specify a prompt file using --prompt_file\"\n        )\n    prompt_str = input_repo.get(prompt_file)\n    if prompt_str:\n        print(colored(\"Using prompt from file:\", \"green\"), prompt_file)\n        print(prompt_str)\n    else:\n        if not improve_mode:\n            prompt_str = input(\n                \"\\nWhat application do you want gpt-engineer to generate?\\n\"\n            )\n        else:\n            prompt_str = input(\"\\nHow do you want to improve the application?\\n\")\n\n    if entrypoint_prompt_file == \"\":\n        entrypoint_prompt = \"\"\n    else:\n        full_entrypoint_prompt_file = concatenate_paths(\n            input_repo.path, entrypoint_prompt_file\n        )\n        if os.path.isfile(full_entrypoint_prompt_file):\n            entrypoint_prompt = input_repo.get(full_entrypoint_prompt_file)\n\n        else:\n            raise ValueError(\"The provided file at --entrypoint-prompt does not exist\")\n\n    if image_directory == \"\":\n        return Prompt(prompt_str, entrypoint_prompt=entrypoint_prompt)\n\n    full_image_directory = concatenate_paths(input_repo.path, image_directory)\n    if os.path.isdir(full_image_directory):\n        if len(os.listdir(full_image_directory)) == 0:\n            raise ValueError(\"The provided --image_directory is empty.\")\n        image_repo = DiskMemory(full_image_directory)\n        return Prompt(\n            prompt_str,\n            image_repo.get(\".\").to_dict(),\n            entrypoint_prompt=entrypoint_prompt,\n        )\n    else:\n        raise ValueError(\"The provided --image_directory is not a directory.\")",
    "source": "github_repo:AntonOsika/gpt-engineer",
    "file": "gpt_engineer/applications/cli/main.py",
    "license": "MIT",
    "language": "python"
}