{
    "code": "#!/usr/bin/env python3\n\"\"\"\nPlayground script to test the browser-use actor API.\n\nThis script demonstrates:\n- Starting a browser session\n- Using the actor API to navigate and interact\n- Finding elements, clicking, scrolling, JavaScript evaluation\n- Testing most of the available methods\n\"\"\"\n\nimport asyncio\nimport json\nimport logging\n\nfrom browser_use import Browser\n\n# Configure logging to see what's happening\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n\nasync def main():\n\t\"\"\"Main playground function.\"\"\"\n\tlogger.info('ğŸš€ Starting browser actor playground')\n\n\t# Create browser session\n\tbrowser = Browser()\n\n\ttry:\n\t\t# Start the browser\n\t\tawait browser.start()\n\t\tlogger.info('âœ… Browser session started')\n\n\t\t# Navigate to Wikipedia using integrated methods\n\t\tlogger.info('ğŸ“– Navigating to Wikipedia...')\n\t\tpage = await browser.new_page('https://en.wikipedia.org')\n\n\t\t# Get basic page info\n\t\turl = await page.get_url()\n\t\ttitle = await page.get_title()\n\t\tlogger.info(f'ğŸ“„ Page loaded: {title} ({url})')\n\n\t\t# Take a screenshot\n\t\tlogger.info('ğŸ“¸ Taking initial screenshot...')\n\t\tscreenshot_b64 = await page.screenshot()\n\t\tlogger.info(f'ğŸ“¸ Screenshot captured: {len(screenshot_b64)} bytes')\n\n\t\t# Set viewport size\n\t\tlogger.info('ğŸ–¥ï¸ Setting viewport to 1920x1080...')\n\t\tawait page.set_viewport_size(1920, 1080)\n\n\t\t# Execute some JavaScript to count links\n\t\tlogger.info('ğŸ” Counting article links using JavaScript...')\n\t\tjs_code = \"\"\"() => {\n\t\t\t// Find all article links on the page\n\t\t\tconst links = Array.from(document.querySelectorAll('a[href*=\"/wiki/\"]:not([href*=\":\"])'))\n\t\t\t\t.filter(link => !link.href.includes('Main_Page') && !link.href.includes('Special:'));\n\t\t\t\n\t\t\treturn {\n\t\t\t\ttotal: links.length,\n\t\t\t\tsample: links.slice(0, 3).map(link => ({\n\t\t\t\t\thref: link.href,\n\t\t\t\t\ttext: link.textContent.trim() \n\t\t\t\t}))\n\t\t\t};\n\t\t}\"\"\"\n\n\t\tlink_info = json.loads(await page.evaluate(js_code))\n\t\tlogger.info(f'ğŸ”— Found {link_info[\"total\"]} article links')\n\t\t# Try to find and interact with links using CSS selector\n\t\ttry:\n\t\t\t# Find article links on the page\n\t\t\tlinks = await page.get_elements_by_css_selector('a[href*=\"/wiki/\"]:not([href*=\":\"])')\n\n\t\t\tif links:\n\t\t\t\tlogger.info(f'ğŸ“‹ Found {len(links)} wiki links via CSS selector')\n\n\t\t\t\t# Pick the first link\n\t\t\t\tlink_element = links[0]\n\n\t\t\t\t# Get link info using available methods\n\t\t\t\tbasic_info = await link_element.get_basic_info()\n\t\t\t\tlink_href = await link_element.get_attribute('href')\n\n\t\t\t\tlogger.info(f'ğŸ¯ Selected element: <{basic_info[\"nodeName\"]}>')\n\t\t\t\tlogger.info(f'ğŸ”— Link href: {link_href}')\n\n\t\t\t\tif basic_info['boundingBox']:\n\t\t\t\t\tbbox = basic_info['boundingBox']\n\t\t\t\t\tlogger.info(f'ğŸ“ Position: ({bbox[\"x\"]}, {bbox[\"y\"]}) Size: {bbox[\"width\"]}x{bbox[\"height\"]}')\n\n\t\t\t\t# Test element interactions with robust implementations\n\t\t\t\tlogger.info('ğŸ‘† Hovering over the element...')\n\t\t\t\tawait link_element.hover()\n\t\t\t\tawait asyncio.sleep(1)\n\n\t\t\t\tlogger.info('ğŸ” Focusing the element...')\n\t\t\t\tawait link_element.focus()\n\t\t\t\tawait asyncio.sleep(0.5)\n\n\t\t\t\t# Click the link using robust click method\n\t\t\t\tlogger.info('ğŸ–±ï¸ Clicking the link with robust fallbacks...')\n\t\t\t\tawait link_element.click()\n\n\t\t\t\t# Wait for navigation\n\t\t\t\tawait asyncio.sleep(3)\n\n\t\t\t\t# Get new page info\n\t\t\t\tnew_url = await page.get_url()\n\t\t\t\tnew_title = await page.get_title()\n\t\t\t\tlogger.info(f'ğŸ“„ Navigated to: {new_title}')\n\t\t\t\tlogger.info(f'ğŸŒ New URL: {new_url}')\n\t\t\telse:\n\t\t\t\tlogger.warning('âŒ No links found to interact with')\n\n\t\texcept Exception as e:\n\t\t\tlogger.warning(f'âš ï¸ Link interaction failed: {e}')\n\n\t\t# Scroll down the page\n\t\tlogger.info('ğŸ“œ Scrolling down the page...')\n\t\tmouse = await page.mouse\n\t\tawait mouse.scroll(x=0, y=100, delta_y=500)\n\t\tawait asyncio.sleep(1)\n\n\t\t# Test mouse operations\n\t\tlogger.info('ğŸ–±ï¸ Testing mouse operations...')\n\t\tawait mouse.move(x=100, y=200)\n\t\tawait mouse.click(x=150, y=250)\n\n\t\t# Execute more JavaScript examples\n\t\tlogger.info('ğŸ§ª Testing JavaScript evaluation...')\n\n\t\t# Simple expressions\n\t\tpage_height = await page.evaluate('() => document.body.scrollHeight')\n\t\tcurrent_scroll = await page.evaluate('() => window.pageYOffset')\n\t\tlogger.info(f'ğŸ“ Page height: {page_height}px, current scroll: {current_scroll}px')\n\n\t\t# JavaScript with arguments\n\t\tresult = await page.evaluate('(x) => x * 2', 21)\n\t\tlogger.info(f'ğŸ§® JavaScript with args: 21 * 2 = {result}')\n\n\t\t# More complex JavaScript\n\t\tpage_stats = json.loads(\n\t\t\tawait page.evaluate(\"\"\"() => {\n\t\t\treturn {\n\t\t\t\turl: window.location.href,\n\t\t\t\ttitle: document.title,\n\t\t\t\tlinks: document.querySelectorAll('a').length,\n\t\t\t\timages: document.querySelectorAll('img').length,\n\t\t\t\tscrollTop: window.pageYOffset,\n\t\t\t\tviewportHeight: window.innerHeight\n\t\t\t};\n\t\t}\"\"\")\n\t\t)\n\t\tlogger.info(f'ğŸ“Š Page stats: {page_stats}')\n\n\t\t# Get page title using different methods\n\t\ttitle_via_js = await page.evaluate('() => document.title')\n\t\ttitle_via_api = await page.get_title()\n\t\tlogger.info(f'ğŸ“ Title via JS: \"{title_via_js}\"')\n\t\tlogger.info(f'ğŸ“ Title via API: \"{title_via_api}\"')\n\n\t\t# Take a final screenshot\n\t\tlogger.info('ğŸ“¸ Taking final screenshot...')\n\t\tfinal_screenshot = await page.screenshot()\n\t\tlogger.info(f'ğŸ“¸ Final screenshot: {len(final_screenshot)} bytes')\n\n\t\t# Test browser navigation with error handling\n\t\tlogger.info('â¬…ï¸ Testing browser back navigation...')\n\t\ttry:\n\t\t\tawait page.go_back()\n\t\t\tawait asyncio.sleep(2)\n\n\t\t\tback_url = await page.get_url()\n\t\t\tback_title = await page.get_title()\n\t\t\tlogger.info(f'ğŸ“„ After going back: {back_title}')\n\t\t\tlogger.info(f'ğŸŒ Back URL: {back_url}')\n\t\texcept RuntimeError as e:\n\t\t\tlogger.info(f'â„¹ï¸ Navigation back failed as expected: {e}')\n\n\t\t# Test creating new page\n\t\tlogger.info('ğŸ†• Creating new blank page...')\n\t\tnew_page = await browser.new_page()\n\t\tnew_page_url = await new_page.get_url()\n\t\tlogger.info(f'ğŸ†• New page created with URL: {new_page_url}')\n\n\t\t# Get all pages\n\t\tall_pages = await browser.get_pages()\n\t\tlogger.info(f'ğŸ“‘ Total pages: {len(all_pages)}')\n\n\t\t# Test form interaction if we can find a form\n\t\ttry:\n\t\t\t# Look for search input on the page\n\t\t\tsearch_inputs = await page.get_elements_by_css_selector('input[type=\"search\"], input[name*=\"search\"]')\n\n\t\t\tif search_inputs:\n\t\t\t\tsearch_input = search_inputs[0]\n\t\t\t\tlogger.info('ğŸ” Found search input, testing form interaction...')\n\n\t\t\t\tawait search_input.focus()\n\t\t\t\tawait search_input.fill('test search query')\n\t\t\t\tawait page.press('Enter')\n\n\t\t\t\tlogger.info('âœ… Form interaction test completed')\n\t\t\telse:\n\t\t\t\tlogger.info('â„¹ï¸ No search inputs found for form testing')\n\n\t\texcept Exception as e:\n\t\t\tlogger.info(f'â„¹ï¸ Form interaction test skipped: {e}')\n\n\t\t\t# wait 2 seconds before closing the new page\n\t\tlogger.info('ğŸ•’ Waiting 2 seconds before closing the new page...')\n\t\tawait asyncio.sleep(2)\n\t\tlogger.info('ğŸ—‘ï¸ Closing new page...')\n\t\tawait browser.close_page(new_page)\n\n\t\tlogger.info('âœ… Playground completed successfully!')\n\n\t\tinput('Press Enter to continue...')\n\n\texcept Exception as e:\n\t\tlogger.error(f'âŒ Error in playground: {e}', exc_info=True)\n\n\tfinally:\n\t\t# Clean up\n\t\tlogger.info('ğŸ§¹ Cleaning up...')\n\t\ttry:\n\t\t\tawait browser.stop()\n\t\t\tlogger.info('âœ… Browser session stopped')\n\t\texcept Exception as e:\n\t\t\tlogger.error(f'âŒ Error stopping browser: {e}')\n\n\nif __name__ == '__main__':\n\tasyncio.run(main())",
    "source": "github_repo:browser-use/browser-use",
    "file": "browser_use/actor/playground/playground.py",
    "license": "MIT",
    "language": "python"
}