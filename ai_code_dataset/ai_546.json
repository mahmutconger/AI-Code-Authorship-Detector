{
    "code": "class SegmentTree:\n    def __init__(self, n, op=lambda x, y: x + y, e=0):\n        self.n = n\n        self.sz = 1 << (n - 1).bit_length()\n        self.tree = [e] * (2 * self.sz)\n        self.op = op\n        self.e = e\n\n    def __getitem__(self, idx):\n        return self.tree[idx + self.sz]\n\n    def set(self, p, x):\n        p += self.sz\n        self.tree[p] = x\n        while p > 1:\n            p >>= 1\n            self.tree[p] = self.op(self.tree[p * 2], self.tree[p * 2 + 1])\n\n    def prod(self, l, r):\n        sml, smr = self.e, self.e\n        l += self.sz\n        r += self.sz\n        while l < r:\n            if l & 1:\n                sml = self.op(sml, self.tree[l])\n                l += 1\n            if r & 1:\n                r -= 1\n                smr = self.op(self.tree[r], smr)\n            l >>= 1\n            r >>= 1\n        return self.op(sml, smr)\n\n    def all_prod(self):\n        return self.tree[1]\n\n    def update(self, p, x):\n        p += self.sz\n        self.tree[p] = x\n        while p > 1:\n            p >>= 1\n            self.tree[p] = self.op(self.tree[p * 2], self.tree[p * 2 + 1])\n\n    def max_right(self, l, f):\n        if l == 0:\n            return self.sz\n        sm = self.e\n        l += self.sz\n        while l < 2 * self.sz:\n            if l & 1:\n                sm = self.op(sm, self.tree[l])\n                if f(sm):\n                    break\n                l += 1\n            l >>= 1\n        return (l - self.sz) >> 1 if f(sm) else 0\n\n    def min_left(self, r, f):\n        if r >= self.n:\n            return -1\n        sm = self.e\n        r += self.sz\n        while l > 1:\n            if r & 1:\n                sm = self.op(self.tree[r], sm)\n                if f(sm):\n                    break\n                r -= 1\n            r >>= 1\n        return (r - self.sz) >> 1 if f(sm) else -1",
    "source": "test-data-ai",
    "prompt": "Segment tree implementation for range sum query yaz.",
    "license": "MIT",
    "language": "python"
}